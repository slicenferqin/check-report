# 检测报告在线查询系统 Product Requirements Document (PRD)

**项目名称：** 浙江省牛叉检测技术有限公司官网与报告查询系统
**文档版本：** 1.0
**创建日期：** 2025-10-11
**负责人：** John（产品经理）
**基于文档：** Project Brief v1.0

---

## Goals and Background Context

### Goals

- 为客户提供快速、便捷的在线报告查询服务，减少人工核实成本
- 建立专业的企业官网形象，展示公司资质和服务能力
- 实现报告的集中化管理，提升内部运营效率
- 支持移动端和桌面端访问，满足不同场景的查询需求
- 为未来的报告自动生成和高级功能打下技术基础

### Background Context

浙江省牛叉检测技术有限公司为工程设备（挖掘机、钻孔桩机等）提供检测服务,出具检测合格证和安装委托检验报告。目前客户收到纸质报告后，无法便捷地验证报告真实性,需要通过传统方式联系公司核实。公司也缺乏统一的报告管理系统，报告扫描件分散存储。

本项目旨在建立一个全栈 Web 应用，包含面向公众的官网前台（公司简介 + 报告查询）和面向内部的管理后台（报告上传和管理）。系统将采用响应式设计，重点优化移动端体验，满足工地现场查询的需求。

### Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-11 | 1.0 | 初始版本创建 | John (PM) |

---

## Requirements

### Functional

**FR1:** 系统必须提供公司简介页面，展示公司基本信息、资质证书、服务范围和联系方式。

**FR2:** 系统必须提供报告查询功能，允许用户通过输入报告编号查询已上传的报告。

**FR3:** 查询结果必须显示报告的基本信息，包括报告类型、报告编号、检测日期、设备名称、委托单位和使用单位。

**FR4:** 系统必须支持在线预览报告扫描件（PDF 或图片格式）。

**FR5:** 系统必须支持下载报告扫描件到本地设备。

**FR6:** 系统必须提供管理员登录功能，使用账号密码进行身份认证。

**FR7:** 管理员必须能够上传报告扫描件，支持 PDF、JPG、PNG 格式，单文件大小限制为 10MB。

**FR8:** 管理员上传报告时必须填写报告元数据，包括报告编号、报告类型、检测日期、设备名称、委托单位、使用单位等字段。

**FR9:** 管理员必须能够查看已上传的报告列表，支持按报告编号、日期等条件搜索。

**FR10:** 管理员必须能够编辑已上传报告的元数据信息。

**FR11:** 管理员必须能够删除已上传的报告（包括文件和元数据）。

**FR12:** 查询不存在的报告编号时，系统必须提示"未找到该报告，请确认报告编号是否正确"。

**FR13:** 报告编号必须唯一，系统在上传时必须验证编号是否已存在。

**FR14:** 系统必须区分两种报告类型：检测合格证报告和安装委托检验报告。

### Non Functional

**NFR1:** 系统必须采用响应式设计，适配手机、平板和桌面端，确保在不同设备上的良好用户体验。

**NFR2:** 首页加载时间必须小于 2 秒（在标准 4G 网络条件下）。

**NFR3:** 报告查询响应时间必须小于 1 秒（数据库查询 + 数据返回）。

**NFR4:** 系统必须支持现代浏览器的最新两个版本（Chrome、Safari、Edge），移动端支持 iOS 13+ 和 Android 8+。

**NFR5:** 系统必须使用 HTTPS 加密传输，保护数据安全。

**NFR6:** 管理后台必须使用 JWT Token 进行身份认证和会话管理。

**NFR7:** 系统必须防止常见安全漏洞（SQL 注入、XSS 攻击、CSRF 攻击）。

**NFR8:** 报告文件必须存储在云对象存储（OSS）中，通过预签名 URL 或访问控制实现安全访问。

**NFR9:** 系统必须支持至少 500 份报告的存储和查询，数据库和存储设计需考虑可扩展性。

**NFR10:** 系统必须具备基本的错误处理和日志记录能力，便于问题排查。

**NFR11:** 代码必须遵循最佳实践，包括适当的注释、模块化设计和代码复用。

**NFR12:** 系统部署必须支持本地开发环境和线上生产环境，配置文件分离。

---

## User Interface Design Goals

### Overall UX Vision

**简洁高效的双端体验：** 官网前台专注于信息展示和报告查询，界面简洁清晰，减少用户操作步骤。管理后台采用标准的后台管理布局，功能组织清晰，操作流程直观。移动端优先，确保在手机上的查询体验流畅。

### Key Interaction Paradigms

- **单一输入查询：** 首页突出报告查询输入框，用户输入报告编号后点击查询，一步到位
- **即时反馈：** 查询结果立即展示，加载状态清晰，错误提示友好
- **移动端优化：** 大按钮、适中字体、易于点击的交互元素
- **管理后台表单驱动：** 上传报告使用表单引导，字段清晰，支持文件拖拽上传

### Core Screens and Views

1. **首页/公司简介页** - 公司信息展示 + 报告查询入口
2. **报告查询结果页** - 显示报告详情 + 预览/下载按钮
3. **管理员登录页** - 简洁的登录表单
4. **管理后台 - 报告列表页** - 展示所有已上传报告，支持搜索和操作
5. **管理后台 - 报告上传页** - 表单 + 文件上传组件
6. **管理后台 - 报告编辑页** - 编辑已上传报告的元数据

### Accessibility

**基础可访问性要求：** 确保基本的语义化 HTML、键盘导航支持和合理的颜色对比度。不强制要求 WCAG AA 合规，但应遵循 Web 可访问性基本原则。

### Branding

**专业简洁风格：** 采用蓝色或绿色为主色调（体现专业和可信），搭配白色和灰色。Logo 和公司名称突出展示。无复杂动画效果，保持加载速度。可参考其他检测机构网站的视觉风格，但避免过度设计。

### Target Device and Platforms

**Web Responsive（移动端优先）：** 系统主要为 Web 应用，采用响应式设计。重点优化移动端体验（预计 60%+ 用户通过手机访问）。管理后台以桌面端为主，但也应支持平板访问。

---

## Technical Assumptions

### Repository Structure

**Monorepo（推荐）：** 前后端代码统一管理在一个仓库中，适合小团队协作。可使用工具如 Turborepo、Nx 或简单的目录结构（如 `apps/frontend`、`apps/backend`）。

**备选方案 - Polyrepo：** 如果团队希望前后端独立部署和版本管理，可采用两个独立仓库（frontend-repo、backend-repo）。

**决策理由：** 考虑到团队规模小（1-2 名开发者），Monorepo 可简化依赖管理和代码共享，降低维护成本。

### Service Architecture

**单体架构（Monolith）：** MVP 阶段采用单体架构，前后端分离但作为一个整体部署。后端提供 RESTful API，前端通过 API 调用获取数据。

**服务职责划分：**
- **前端服务：** 静态资源托管，页面渲染
- **后端服务：** API 接口，业务逻辑，数据库操作
- **文件存储服务：** 云对象存储（OSS），独立于应用服务器

**扩展性考虑：** 预留微服务拆分空间。未来如果需要自动生成报告功能，可将其拆分为独立的报告生成服务。

### Testing Requirements

**分层测试策略：**

1. **单元测试（必须）：** 覆盖后端核心业务逻辑（如报告查询、上传验证）和前端关键组件
2. **集成测试（推荐）：** 测试 API 端点和数据库交互，确保前后端集成正常
3. **端到端测试（可选）：** 使用 Playwright 或 Cypress 测试关键用户流程（如查询报告、上传报告）
4. **手动测试：** 开发环境提供便捷的手动测试工具（如 Swagger UI for API、本地测试数据）

**测试覆盖率目标：** 核心业务逻辑单元测试覆盖率 ≥ 70%

### Additional Technical Assumptions and Requests

**技术栈建议：**

- **前端：** React 18+ 或 Vue 3+，配合 TailwindCSS 或 Ant Design 组件库
- **后端：** Node.js (Express 或 Nest.js) 或 Python (FastAPI)
- **数据库：** PostgreSQL（推荐）或 MySQL，支持关系型数据存储
- **文件存储：** 阿里云 OSS 或腾讯云 COS
- **身份认证：** JWT Token，bcrypt 加密密码
- **部署：** Docker 容器化，云服务器（阿里云 ECS 或腾讯云 CVM）
- **CI/CD：** GitHub Actions 或 GitLab CI（可选，简化部署流程）

**环境配置：**
- 支持本地开发环境（localhost + 本地数据库）
- 支持线上生产环境（云服务器 + 云数据库 + OSS）
- 使用环境变量管理配置（数据库连接、OSS 密钥等）

**其他技术要求：**
- 后端 API 必须提供清晰的文档（建议使用 Swagger/OpenAPI）
- 前端必须实现良好的错误处理和 Loading 状态
- 管理员密码存储必须使用哈希加密，禁止明文存储
- 文件上传必须进行类型和大小验证（防止恶意文件）

---

## Epic List

### Epic 1: 项目基础设施与核心数据模型

建立项目骨架、开发环境、数据库结构和核心后端 API，实现报告数据的基本 CRUD 操作，并提供一个简单的健康检查端点验证系统可用性。

### Epic 2: 公众官网与报告查询功能

开发面向公众的官网首页（公司简介）和报告查询功能，用户可通过报告编号查询并查看/下载报告扫描件，完成核心业务价值交付。

### Epic 3: 管理后台与报告管理功能

开发管理员登录系统和后台管理界面，实现报告的上传、编辑、删除和列表查看功能，完成系统的闭环管理能力。

---

## Epic 1: 项目基础设施与核心数据模型

**目标：** 搭建完整的开发环境和项目结构，设计并实现数据库模型，开发核心后端 API 接口，为后续功能开发奠定坚实基础。同时实现一个简单的健康检查端点，验证系统基础设施的可用性。

### Story 1.1: 项目初始化与开发环境搭建

**用户故事：**

作为一名**开发工程师**，
我想**初始化项目仓库并搭建本地开发环境**，
以便**快速开始功能开发并确保团队协作的一致性**。

**Acceptance Criteria:**

1. 创建 Git 仓库并初始化项目结构（Monorepo 或 Polyrepo，根据技术假设选择）
2. 配置前端项目（React 或 Vue），包括基础路由、样式系统（TailwindCSS）和构建工具（Vite 或 Webpack）
3. 配置后端项目（Node.js Express/Nest.js 或 Python FastAPI），包括基础框架、环境变量管理和日志系统
4. 配置数据库连接（PostgreSQL 或 MySQL），确保本地开发环境可正常连接
5. 编写 README.md 文档，说明项目结构、环境要求和启动步骤
6. 配置代码格式化工具（Prettier、ESLint）和 Git Hooks（可选：Husky + lint-staged）
7. 实现一个简单的健康检查端点（`GET /api/health`），返回系统状态
8. 前端能够成功启动并显示一个"欢迎页面"或"开发中"页面
9. 后端能够成功启动并通过健康检查端点返回 200 状态
10. 提交初始代码到 Git 仓库，包含清晰的 commit 信息

---

### Story 1.2: 数据库模型设计与实现

**用户故事：**

作为一名**后端开发工程师**，
我想**设计并实现报告和管理员的数据库模型**，
以便**为后续的业务逻辑提供数据存储支持**。

**Acceptance Criteria:**

1. 设计 `reports` 表，包含以下字段：
   - `id`（主键，自增）
   - `report_number`（报告编号，唯一索引，VARCHAR）
   - `report_type`（报告类型，ENUM: '检测合格证', '安装委托检验'）
   - `inspection_date`（检测日期，DATE）
   - `equipment_name`（设备名称，VARCHAR）
   - `client_company`（委托单位，VARCHAR）
   - `user_company`（使用单位，VARCHAR）
   - `file_url`（报告文件 URL，VARCHAR）
   - `file_type`（文件类型，ENUM: 'PDF', 'JPG', 'PNG'）
   - `created_at`（创建时间，TIMESTAMP）
   - `updated_at`（更新时间，TIMESTAMP）
2. 设计 `admins` 表，包含以下字段：
   - `id`（主键，自增）
   - `username`（用户名，唯一，VARCHAR）
   - `password_hash`（密码哈希值，VARCHAR）
   - `created_at`（创建时间，TIMESTAMP）
3. 使用数据库迁移工具（如 Prisma、TypeORM、Alembic）创建数据库表结构
4. 编写数据库初始化脚本，创建至少一个测试管理员账号（用户名: `admin`，密码: `Admin@123`）
5. 验证数据库表创建成功，能够通过 SQL 客户端或 ORM 工具查看表结构
6. 编写数据模型文档，说明各字段的用途和约束

---

### Story 1.3: 报告查询 API 开发

**用户故事：**

作为一名**后端开发工程师**，
我想**开发报告查询的 RESTful API 接口**，
以便**前端能够根据报告编号获取报告详情**。

**Acceptance Criteria:**

1. 实现 `GET /api/reports/:reportNumber` 接口，根据报告编号查询报告
2. 查询成功时，返回 200 状态码和报告详情 JSON（包含所有字段）
3. 报告不存在时，返回 404 状态码和错误信息 `{ "error": "未找到该报告，请确认报告编号是否正确" }`
4. 实现输入验证，报告编号不能为空，否则返回 400 状态码
5. 实现错误处理，数据库查询失败时返回 500 状态码和通用错误信息
6. 编写单元测试，覆盖成功查询、报告不存在、输入无效等场景
7. 使用 Postman 或类似工具测试 API 端点，确保返回数据格式正确
8. 更新 API 文档（Swagger 或 README），说明接口的请求和响应格式

---

### Story 1.4: 报告上传 API 开发（元数据部分）

**用户故事：**

作为一名**后端开发工程师**，
我想**开发报告元数据创建的 API 接口**，
以便**管理员能够添加新的报告记录**。

**Acceptance Criteria:**

1. 实现 `POST /api/admin/reports` 接口，接收报告元数据（JSON 格式）
2. 接口必须包含身份认证中间件，验证请求中的 JWT Token
3. 接收的字段包括：`report_number`、`report_type`、`inspection_date`、`equipment_name`、`client_company`、`user_company`、`file_url`、`file_type`
4. 验证所有必填字段不能为空，报告编号必须唯一（不能重复）
5. 验证报告类型和文件类型必须为枚举值中的一个
6. 数据验证通过后，将报告信息保存到数据库，返回 201 状态码和新创建的报告 JSON
7. 报告编号重复时，返回 409 状态码和错误信息 `{ "error": "报告编号已存在" }`
8. 数据验证失败时，返回 400 状态码和具体的验证错误信息
9. 编写单元测试，覆盖成功创建、编号重复、字段缺失等场景
10. 更新 API 文档，说明接口的认证方式和请求/响应格式

**注意：** 此 Story 仅处理元数据，文件上传将在后续 Story 中实现。

---

### Story 1.5: 文件上传服务集成

**用户故事：**

作为一名**后端开发工程师**，
我想**集成云对象存储服务（OSS）用于报告文件上传**，
以便**管理员能够上传报告扫描件并获取文件 URL**。

**Acceptance Criteria:**

1. 配置云对象存储（阿里云 OSS 或腾讯云 COS）的访问密钥和存储桶
2. 实现文件上传工具类或模块，封装 OSS SDK 的上传操作
3. 实现 `POST /api/admin/upload` 接口，接收文件上传（multipart/form-data）
4. 接口必须包含身份认证中间件，验证 JWT Token
5. 验证上传文件的类型（只允许 PDF、JPG、PNG），大小不超过 10MB
6. 文件验证通过后，上传到 OSS，使用 UUID 或时间戳生成唯一文件名
7. 上传成功后，返回 200 状态码和文件 URL `{ "file_url": "https://...", "file_type": "PDF" }`
8. 文件类型或大小不符合要求时，返回 400 状态码和错误信息
9. OSS 上传失败时，返回 500 状态码和错误信息
10. 编写单元测试或集成测试，模拟文件上传流程（可使用 Mock OSS）
11. 更新 API 文档，说明文件上传的格式和限制

---

## Epic 2: 公众官网与报告查询功能

**目标：** 开发面向公众的官网首页和报告查询功能，完成核心业务价值交付。用户能够访问官网，查看公司信息，并通过报告编号查询和查看/下载报告扫描件。

### Story 2.1: 官网首页开发

**用户故事：**

作为一名**工地质检人员或潜在客户**，
我想**访问检测公司的官网首页，了解公司的基本信息**，
以便**建立对公司的信任并找到报告查询入口**。

**Acceptance Criteria:**

1. 实现响应式首页布局，包含以下模块：
   - 页头（Header）：公司 Logo、公司名称、导航菜单
   - 公司简介区域：公司简介文字（2-3 段）、资质证书图片展示
   - 服务范围区域：列出主要检测服务项目
   - 报告查询区域：突出显示报告查询输入框和查询按钮
   - 联系方式区域：电话、邮箱、地址
   - 页脚（Footer）：版权信息、备案号
2. 页面在桌面端、平板端和手机端均能正常显示，布局自适应
3. 报告查询输入框聚焦时有明显的视觉反馈
4. 点击查询按钮（暂时不实现查询逻辑，仅跳转到查询结果页占位符）
5. 页面加载时间 < 2 秒（优化图片大小和资源加载）
6. 页面符合基本的 SEO 要求（HTML 语义化标签、Meta 标签）
7. 测试页面在 Chrome、Safari、Edge 浏览器上的显示效果
8. 确保首页内容可通过环境变量或配置文件灵活修改（如公司名称、联系方式）

---

### Story 2.2: 报告查询功能前端实现

**用户故事：**

作为一名**工地质检人员**，
我想**在官网首页输入报告编号并点击查询**，
以便**快速找到对应的检测报告**。

**Acceptance Criteria:**

1. 实现报告查询输入框和查询按钮的交互逻辑
2. 用户输入报告编号后，点击查询按钮，前端发起 API 请求 `GET /api/reports/:reportNumber`
3. 查询过程中，显示 Loading 状态（如加载动画或按钮禁用）
4. 查询成功时，跳转到报告详情页，展示报告信息
5. 查询失败时（报告不存在），在首页显示错误提示信息："未找到该报告，请确认报告编号是否正确"
6. 网络错误或服务器错误时，显示通用错误提示："查询失败，请稍后重试"
7. 输入框为空时，点击查询按钮，提示用户"请输入报告编号"
8. 支持键盘 Enter 键触发查询操作
9. 测试查询功能在移动端和桌面端的交互体验
10. 编写前端单元测试或 E2E 测试，覆盖成功查询、报告不存在、输入为空等场景

---

### Story 2.3: 报告详情页开发

**用户故事：**

作为一名**工地质检人员**，
我想**查看报告的详细信息和扫描件**，
以便**验证报告的真实性并下载报告备份**。

**Acceptance Criteria:**

1. 实现报告详情页路由（如 `/reports/:reportNumber`）
2. 页面显示报告的所有元数据字段：
   - 报告编号
   - 报告类型
   - 检测日期
   - 设备名称
   - 委托单位
   - 使用单位
3. 页面包含报告扫描件的预览区域：
   - 如果文件类型为 PDF，使用 PDF 预览插件（如 `react-pdf` 或 `iframe`）
   - 如果文件类型为图片（JPG、PNG），直接显示图片
4. 页面包含"下载报告"按钮，点击后下载文件到本地
5. 页面采用响应式设计，在移动端和桌面端均能良好显示
6. 移动端优化：预览区域占据适当空间，避免过度缩放
7. 处理文件加载失败的情况，显示"文件加载失败"提示
8. 页面包含"返回首页"或"重新查询"按钮，方便用户继续查询
9. 测试不同文件类型（PDF、JPG、PNG）的预览效果
10. 测试下载功能，确保文件能够正常下载并保留原始文件名

---

## Epic 3: 管理后台与报告管理功能

**目标：** 开发管理员登录系统和后台管理界面，实现报告的上传、编辑、删除和列表查看功能，完成系统的闭环管理能力。

### Story 3.1: 管理员登录功能开发

**用户故事：**

作为一名**公司内部管理员**，
我想**通过用户名和密码登录管理后台**，
以便**安全地访问报告管理功能**。

**Acceptance Criteria:**

1. 实现管理员登录 API 接口 `POST /api/admin/login`，接收用户名和密码
2. 验证用户名和密码，密码使用 bcrypt 或类似算法进行哈希比对
3. 登录成功时，生成 JWT Token 并返回 200 状态码和 Token `{ "token": "...", "username": "..." }`
4. 登录失败时（用户名不存在或密码错误），返回 401 状态码和错误信息 `{ "error": "用户名或密码错误" }`
5. 实现前端登录页面（`/admin/login`），包含用户名、密码输入框和登录按钮
6. 前端提交登录请求后，显示 Loading 状态
7. 登录成功后，将 Token 存储到 localStorage 或 sessionStorage，并跳转到管理后台首页
8. 登录失败时，在登录页显示错误提示信息
9. 实现身份认证中间件（用于后续后台 API 接口），验证请求中的 JWT Token
10. Token 无效或过期时，返回 401 状态码，前端自动跳转到登录页
11. 编写单元测试，覆盖登录成功、密码错误、用户名不存在等场景
12. 测试登录功能的前后端集成，确保 Token 能够正确生成和验证

---

### Story 3.2: 管理后台首页与导航

**用户故事：**

作为一名**登录成功的管理员**，
我想**看到管理后台的首页和导航菜单**，
以便**快速访问不同的管理功能**。

**Acceptance Criteria:**

1. 实现管理后台布局（Layout），包含侧边栏导航和主内容区域
2. 侧边栏包含以下菜单项：
   - 报告列表
   - 上传报告
   - 退出登录
3. 点击菜单项时，切换到对应的页面或组件
4. 实现退出登录功能，点击后清除 Token 并跳转到登录页
5. 管理后台首页显示简单的欢迎信息和统计数据（如已上传报告总数）
6. 统计数据通过 API 接口 `GET /api/admin/stats` 获取（返回报告总数）
7. 未登录用户访问管理后台时，自动跳转到登录页
8. 页面采用响应式设计，支持平板和桌面端访问
9. 测试导航切换的流畅性和页面加载速度

---

### Story 3.3: 报告列表页开发

**用户故事：**

作为一名**管理员**，
我想**查看所有已上传的报告列表**，
以便**快速浏览和管理报告**。

**Acceptance Criteria:**

1. 实现报告列表 API 接口 `GET /api/admin/reports`，返回所有报告的列表（包含分页参数）
2. 接口必须包含身份认证中间件，验证 JWT Token
3. 接口支持分页查询（如 `?page=1&limit=20`），默认每页 20 条
4. 返回数据包括报告编号、报告类型、检测日期、设备名称、创建时间
5. 实现前端报告列表页（`/admin/reports`），使用表格组件展示报告列表
6. 表格包含以下列：报告编号、报告类型、检测日期、设备名称、操作
7. 操作列包含"查看"、"编辑"、"删除"按钮
8. 点击"查看"按钮，跳转到报告详情页（前台页面或后台详情页）
9. 实现分页控件，支持切换页码
10. 页面加载时显示 Loading 状态，数据加载完成后渲染表格
11. 列表为空时，显示"暂无报告"提示
12. 测试列表页在不同数据量下的加载速度和显示效果

---

### Story 3.4: 报告上传功能开发

**用户故事：**

作为一名**管理员**，
我想**上传新的报告扫描件并填写报告信息**，
以便**让客户能够查询到这份报告**。

**Acceptance Criteria:**

1. 实现报告上传页面（`/admin/upload`），包含表单和文件上传组件
2. 表单字段包括：
   - 报告编号（必填，文本输入）
   - 报告类型（必填，下拉选择：检测合格证、安装委托检验）
   - 检测日期（必填，日期选择器）
   - 设备名称（必填，文本输入）
   - 委托单位（必填，文本输入）
   - 使用单位（必填，文本输入）
   - 报告文件（必填，文件上传，支持 PDF、JPG、PNG，最大 10MB）
3. 文件上传组件支持拖拽上传和点击选择文件
4. 文件选择后，显示文件名和文件大小，允许用户重新选择
5. 提交表单时，先调用文件上传接口 `POST /api/admin/upload` 获取文件 URL
6. 文件上传成功后，再调用报告创建接口 `POST /api/admin/reports` 提交完整数据
7. 上传过程中，显示上传进度（如进度条）和"上传中"状态
8. 上传成功后，显示成功提示并清空表单，允许继续上传
9. 上传失败时，显示具体的错误信息（如"文件类型不支持"、"报告编号已存在"）
10. 实现表单验证，必填字段不能为空，文件必须选择
11. 测试上传不同类型和大小的文件，验证上传功能的稳定性
12. 测试报告编号重复的情况，确保错误提示清晰

---

### Story 3.5: 报告编辑功能开发

**用户故事：**

作为一名**管理员**，
我想**编辑已上传报告的元数据信息**，
以便**纠正错误或更新报告信息**。

**Acceptance Criteria:**

1. 实现报告编辑 API 接口 `PUT /api/admin/reports/:id`，接收报告 ID 和更新的字段
2. 接口必须包含身份认证中间件，验证 JWT Token
3. 接口支持更新以下字段：`report_type`、`inspection_date`、`equipment_name`、`client_company`、`user_company`
4. 报告编号（`report_number`）不允许修改
5. 文件 URL（`file_url`）不允许通过此接口修改（如需更换文件，应删除后重新上传）
6. 更新成功时，返回 200 状态码和更新后的报告 JSON
7. 报告 ID 不存在时，返回 404 状态码和错误信息
8. 实现前端报告编辑页面（`/admin/reports/:id/edit`），预填充现有报告数据
9. 编辑页面表单与上传页面类似，但不包含报告编号和文件上传（显示为只读或不可编辑）
10. 提交编辑后，显示成功提示并跳转回报告列表页
11. 编辑失败时，显示错误提示信息
12. 测试编辑功能，验证数据更新是否正确反映在列表和详情页

---

### Story 3.6: 报告删除功能开发

**用户故事：**

作为一名**管理员**，
我想**删除错误上传或过期的报告**，
以便**保持报告列表的准确性**。

**Acceptance Criteria:**

1. 实现报告删除 API 接口 `DELETE /api/admin/reports/:id`，根据报告 ID 删除报告
2. 接口必须包含身份认证中间件，验证 JWT Token
3. 删除操作必须同时删除数据库记录和 OSS 中的文件
4. 删除成功时，返回 200 状态码和成功信息 `{ "message": "报告删除成功" }`
5. 报告 ID 不存在时，返回 404 状态码和错误信息
6. 文件删除失败时，记录日志但不阻止数据库记录删除（避免数据不一致）
7. 在报告列表页的"删除"按钮上实现删除功能
8. 点击删除按钮时，弹出确认对话框："确定要删除该报告吗？删除后无法恢复"
9. 用户确认后，发起删除请求，显示 Loading 状态
10. 删除成功后，刷新报告列表，移除已删除的报告
11. 删除失败时，显示错误提示信息
12. 编写单元测试，覆盖删除成功、报告不存在等场景
13. 测试删除功能，验证报告在前台查询页无法再被查询到

---

## Checklist Results Report

**待执行：** 在完成所有 Epic 和 Story 编写后，执行 PM Checklist 任务，验证 PRD 的完整性和一致性。结果将在此处更新。

---

## Next Steps

### UX Expert Prompt

您好！我已经完成了"检测报告在线查询系统"的产品需求文档（PRD）。现在请您基于此 PRD 创建前端 UI/UX 规格说明文档（Front-End Spec），包括：

- 详细的界面设计指南
- 用户交互流程图
- 关键页面的线框图或原型设计
- 组件库选择和样式规范

请参考 PRD 中的"User Interface Design Goals"部分，并在此基础上进行扩展。

### Architect Prompt

您好！我已经完成了"检测报告在线查询系统"的产品需求文档（PRD）。现在请您基于此 PRD 创建系统架构文档（Architecture Document），包括：

- 系统架构设计（前后端架构、数据库设计、文件存储方案）
- 技术栈详细说明和选型理由
- API 接口设计规范
- 安全策略和性能优化方案
- 部署架构和环境配置

请参考 PRD 中的"Technical Assumptions"部分，并在此基础上进行详细设计。

---

**文档状态：** 初稿完成，待审阅和 Checklist 验证
**下一步负责人：** UX Expert 或 Architect
