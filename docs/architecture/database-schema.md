# Database Schema

## Prisma Schema Definition

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// 报告类型枚举
enum ReportType {
  INSPECTION_CERT           // 检测合格证
  INSTALLATION_INSPECTION   // 安装委托检验
}

// 文件类型枚举
enum FileType {
  PDF
  JPG
  PNG
}

// 报告表
model Report {
  id             Int         @id @default(autoincrement())
  reportNumber   String      @unique @map("report_number") @db.VarChar(50)
  reportType     ReportType  @map("report_type")
  inspectionDate DateTime    @map("inspection_date") @db.Date
  equipmentName  String      @map("equipment_name") @db.VarChar(200)
  clientCompany  String      @map("client_company") @db.VarChar(200)
  userCompany    String      @map("user_company") @db.VarChar(200)
  fileUrl        String      @map("file_url") @db.VarChar(500)
  fileType       FileType    @map("file_type")
  createdAt      DateTime    @default(now()) @map("created_at")
  updatedAt      DateTime    @updatedAt @map("updated_at")

  @@index([reportNumber])
  @@index([createdAt])
  @@map("reports")
}

// 管理员表
model Admin {
  id           Int      @id @default(autoincrement())
  username     String   @unique @db.VarChar(50)
  passwordHash String   @map("password_hash") @db.VarChar(255)
  createdAt    DateTime @default(now()) @map("created_at")

  @@map("admins")
}
```

## SQL Schema (Generated by Prisma)

```sql
-- CreateEnum
CREATE TYPE "ReportType" AS ENUM ('INSPECTION_CERT', 'INSTALLATION_INSPECTION');
CREATE TYPE "FileType" AS ENUM ('PDF', 'JPG', 'PNG');

-- CreateTable
CREATE TABLE "reports" (
    "id" SERIAL NOT NULL,
    "report_number" VARCHAR(50) NOT NULL,
    "report_type" "ReportType" NOT NULL,
    "inspection_date" DATE NOT NULL,
    "equipment_name" VARCHAR(200) NOT NULL,
    "client_company" VARCHAR(200) NOT NULL,
    "user_company" VARCHAR(200) NOT NULL,
    "file_url" VARCHAR(500) NOT NULL,
    "file_type" "FileType" NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    CONSTRAINT "reports_pkey" PRIMARY KEY ("id")
);

-- CreateTable
CREATE TABLE "admins" (
    "id" SERIAL NOT NULL,
    "username" VARCHAR(50) NOT NULL,
    "password_hash" VARCHAR(255) NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT "admins_pkey" PRIMARY KEY ("id")
);

-- CreateIndex
CREATE UNIQUE INDEX "reports_report_number_key" ON "reports"("report_number");
CREATE INDEX "reports_report_number_idx" ON "reports"("report_number");
CREATE INDEX "reports_created_at_idx" ON "reports"("created_at");

-- CreateIndex
CREATE UNIQUE INDEX "admins_username_key" ON "admins"("username");
```

---
